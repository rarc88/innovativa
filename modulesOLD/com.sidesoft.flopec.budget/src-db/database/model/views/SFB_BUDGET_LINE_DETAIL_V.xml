<?xml version="1.0"?>
  <database name="VIEW SFB_BUDGET_LINE_DETAIL_V">
    <view name="SFB_BUDGET_LINE_DETAIL_V"><![CDATA[SELECT bcl.sfb_budget_cert_line_id AS sfb_budget_line_detail_v_id, bcl.ad_client_id, bcl.ad_org_id, bcl.created, bcl.createdby, bcl.updated, bcl.updatedby, bcl.isactive, bl.sfb_budget_line_id, bcl.sfb_budget_cert_line_id, bcl.sfb_budget_certificate_id, CASE WHEN bc.certificate_status = 'CL' THEN bcl.budget_committed_value ELSE bcl.budget_certified_value END AS totalamt, bc.certificate_status AS status, bcl.budget_certified_value - bcl.budget_committed_value - coalesce(sfbp.amount,0) AS returnorder FROM sfb_budget_line bl LEFT JOIN sfb_budget_version bv ON bl.sfb_budget_version_id = bv.sfb_budget_version_id LEFT JOIN sfb_budget b ON bv.sfb_budget_id = b.sfb_budget_id, sfb_budget_cert_line bcl LEFT JOIN sfb_budget_certificate bc ON bcl.sfb_budget_certificate_id = bc.sfb_budget_certificate_id left  join fin_payment_detail  sfbp on bcl.sfb_budget_cert_line_id = sfbp.em_sfb_budget_cert_line_id WHERE bcl.ad_client_id = bl.ad_client_id AND bcl.ad_org_id = bl.ad_org_id AND bcl.c_costcenter_id = bl.c_costcenter_id AND bcl.user1_id = bl.user1_id AND bcl.sfb_budget_item_id = bl.sfb_budget_item_id AND bc.sfb_budget_area_id = bl.sfb_budget_area_id AND bv.version_status = 'AP' AND bc.type_of_budget = b.type_of_budget AND bc.c_year_id = b.c_year_id]]></view>
  </database>
