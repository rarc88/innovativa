<?xml version="1.0"?>
  <database name="VIEW SSVE_VIATICAL_DETAILS_AUX3">
    <view name="SSVE_VIATICAL_DETAILS_AUX3"><![CDATA[SELECT CASE WHEN vsl.sfb_budget_cert_line_id IS NULL THEN '' ELSE vs.ssve_viatical_id END AS ssve_viatical_id, vs.ssve_viatical_settlement_id, sum(CASE WHEN vsl.sfb_budget_cert_line_id IS NULL THEN 0 ELSE vsl.linenetamt END) AS totalamt_sett, vsl.sfb_budget_cert_line_id FROM ssve_viatical_settlement vs LEFT JOIN ssve_viatsettlementline vsl ON vsl.ssve_viatical_settlement_id = vs.ssve_viatical_settlement_id WHERE vs.processed = 'Y' GROUP BY vs.ssve_viatical_id, vsl.sfb_budget_cert_line_id, vs.ssve_viatical_settlement_id UNION ALL SELECT CASE WHEN vst.sfb_budget_cert_line_id IS NULL THEN '' ELSE vs.ssve_viatical_id END AS ssve_viatical_id, CASE WHEN vst.sfb_budget_cert_line_id IS NULL THEN '' ELSE vs.ssve_viatical_settlement_id END AS ssve_viatical_settlement_id, sum(CASE WHEN vst.sfb_budget_cert_line_id IS NULL THEN 0 ELSE vst.linenetamt END) AS totalamt_sett, vst.sfb_budget_cert_line_id FROM ssve_viatical_settlement vs LEFT JOIN ssve_viatsettl_transp vst ON vst.ssve_viatical_settlement_id = vs.ssve_viatical_settlement_id WHERE vs.processed = 'Y' GROUP BY vs.ssve_viatical_id, vst.sfb_budget_cert_line_id, vs.ssve_viatical_settlement_id UNION ALL SELECT CASE WHEN vs.sfb_budget_cert_line_id IS NULL THEN '' ELSE vs.ssve_viatical_id END AS ssve_viatical_id, CASE WHEN vs.sfb_budget_cert_line_id IS NULL THEN '' ELSE vs.ssve_viatical_settlement_id END AS ssve_viatical_settlement_id, CASE WHEN vs.sfb_budget_cert_line_id IS NULL THEN 0 ELSE vs.budgetadditfunds + vs.budgetmobilamt + vs.budgetfeedingamt END AS totalamt_sett, vs.sfb_budget_cert_line_id FROM ssve_viatical_settlement vs WHERE (vs.budgetadditfunds + vs.budgetmobilamt + vs.budgetfeedingamt) > 0 AND vs.processed = 'Y']]></view>
  </database>
